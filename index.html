<!DOCTYPE html>
<html lang="en-US">
  <head>
    <title>PWA Ynov</title>
    <meta charset="UTF-8" />
    <meta name="description" content="A sandbox app around PWA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles/style.css" />
    <link rel="manifest" href="manifest.json" />
    <script
      async
      src="https://cdn.jsdelivr.net/npm/pwacompat@2.0.9/pwacompat.min.js"
      integrity="sha384-VcI6S+HIsE80FVM1jgbd6WDFhzKYA0PecD/LcIyMQpT4fMJdijBh0I7Iblaacawc"
      crossorigin="anonymous"
    ></script>
    <script src="scripts/app.js"></script>
    <script src="assets/imgs/imageDictionary.js"></script>
    <script src="assets/imgs/tiny/tinyImageDictionary.js"></script>
    <script src="scripts/image.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/progressive-image.js/dist/progressive-image.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/progressive-image.js/dist/progressive-image.js"></script>
    <script>
      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        let deferredPrompt = e;
        const btn = document.getElementById('install_button');

        if (window.matchMedia('(display-mode: standalone)').matches) {
            btn.style.display = 'none';
        } else {
            btn.addEventListener('click', (e) => {
              deferredPrompt.prompt();
    
              deferredPrompt.userChoice.then((choiceResult) => {
                if (choiceResult.outcome === 'accepted') {
                  console.log('A2HS prompt accepted');
                } else {
                  console.log('A2HS prompt declined');
                }
                deferredPrompt = null;
              });
            });
        }
      });
    </script>
  </head>

  <body>
    <div class="app-header">
      <h1>Sandbox PWA Ynov</h1>
      <button id="install_button" type="button" value="Install">Install</button>
    </div>
    <div id="gallery"></div>
  </body>
</html>
